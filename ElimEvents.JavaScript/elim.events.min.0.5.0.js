(function(e){var g=Array.prototype.splice,f=Array.prototype.slice;function d(i,h){this._cb=false;this.context=null;this.data=h;this.value=null;this.name=i}d.prototype={isBubleCancelled:function(){return this._cb},cancelBubble:function(){this._cb=true},reset:function(){this._cb=false;this.data=null;this.value=null;this.name=null}};function c(h,j,i){this.cb=h;this.isOnce=j;this.context=i}c.prototype={destroy:function(){this.cb=null;this.context=null}};function a(j,h,i){this.name=null;this.context=i;this.listeners=[];this.active=true;this.lastEvent=null;this.hasRun=false;this.memorise=true;this.name=j;if(h){this.memorise=h.memorise;this.active=h.active}}a.prototype={constructor:a,add:function(h,j,i){var k;if(this.findIndex(h,i)===-1){k=new c(h,j,i||this.context);this.listeners.push(k);if(this.memorise&&this.hasRun){k.cb.apply(i||this.lastEvent.context,[this.lastEvent].concat(this.lastEvent.data))}}return this},remove:function(h,i){var j=this.findIndex(h,i);if(j!==null&&j!==-1){this.listeners[j].destroy();this.listeners.splice(j,1)}},count:function(){return this.listeners.length},find:function(h,j,n){var k,m=this.listeners.length,l;for(k=0;k<m;k=(k+1)){l=this.listeners[k];if(l.cb===h&&l.context===j){if(n){return k}else{return l}}}return n?-1:null},findIndex:function(h,i){return this.find(h,i,true)},execute:function(){if(this.active===false){return}var k=false,m,o=this.listeners.slice(),n,q=o.length,p,j=arguments[0]||this.context,h=arguments[1]||[],l=new d(this.name,h);l.context=j;for(n=0;n<q;n=(n+1)){p=o[n];m=p.cb.apply(p.context||j,[l].concat(h));if(p.isOnce){this.listeners.splice(n,1)}if(m===false||l.isBubleCancelled()){break}}this.hasRun=true;this.lastEvent=l;return l},destroy:function(){this.listeners.length=0;this.name=null;this.listeners=null;this.context=null}};function b(h,i){if(i===null||i===undefined){i={}}this.handlers=[];this.context=h||this;this.errorOnNullHandler=typeof i.errorOnNullHandler==="boolean"?i.errorOnNullHandler:true;this.memorise=typeof i.memorise==="boolean"?i.memorise:true}b.prototype={setContext:function(h){this.context=h},setEnabled:function(k,j){var i=this.getHandler(k);if(i===null){throw new Error("No handler with the name {name} could be found.".replace("{name}",k))}i.active=j();return this},isEnabled:function(j){var i=this.getHandler(j);if(i===null){return null}return i.active},getHandler:function(k){var h,j=this.handlers.length;for(h=0;h<j;h=(h+1)){if(this.handlers[h].name===k){return this.handlers[h]}}return null},setHandler:function(j,h){var i=new a(j,{memorise:this.memorise,active:true},h||this.context);this.handlers.push(i);return i},trigger:function(k,i){var h=f.call(arguments,2),j=this.getHandler(k);if(!j){if(!this.errorOnNullHandler){return}throw new Error("No handler with the name {name} could be found.".replace("{name}",k))}return j.execute(i||this.context,h)},_on:function(m,h,l,i){var k=this.getHandler(m),j=i||this.context;if(typeof h!=="function"){throw new Error("Unable to register callback, typeof of cb is not a function.")}if(!k){k=this.setHandler(m,j)}k.add(h,l,i||this.context);return k},on:function(p,h,l,j){var q=p.split(" "),k,m=q.length,o=[];for(k=0;k<m;k=(k+1)){o.push(this._on(q[k],h,l,j||this.context))}return m===1?o[0]:o},_off:function(k,h,i){var j=this.getHandler(k);if(!j){return}j.remove(h,i||this.context)},off:function(o,h,j){var p=o.split(" "),k,l=p.length,m=[];for(k=0;k<l;k=(k+1)){m.push(this._off(p[k],h,j))}return this},destroy:function(){this.handlers.length=0;this.handlers=null;this.context=null}};e.ElimSignals=b;e.ElimSignals["util"]={createOn:function(h){var i;b.constructor.apply(h,[arguments[1]]);for(i in b.prototype){if(b.prototype.hasOwnProperty(i)){h[i]=b.prototype[i]}}}}})(this);