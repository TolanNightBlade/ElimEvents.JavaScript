/* @license
 * ElimSignals <https://github.com/TolanNightBlade/ElimEvents.JavaScript/>
 * Released under the MIT license
 * Author: Michael Wood
 * Version: 0.5.0 (2013/06/13 14:45)
*/
(function(e){var f=Array.prototype.slice;function d(h,g){this._cb=false;this.context=null;this.target=null;this.data=g;this.value=null;this.name=h}d.prototype={isBubleCancelled:function(){return this._cb},cancelBubble:function(){this._cb=true}};function c(g,i,h){this.cb=g;this.isOnce=i;this.context=h}c.prototype={destroy:function(){this.cb=null;this.context=null}};function a(i,g,h){this.name=null;this.context=h;this.listeners=[];this.active=true;this.lastEvent=null;this.hasRun=false;this.memorise=true;this.name=i;if(g){this.memorise=g.memorise;this.active=g.active}}a.prototype={constructor:a,add:function(g,i,h){var j;if(this.findIndex(g,h)===-1){j=new c(g,i,h||this.context);this.listeners.push(j);if(this.memorise&&this.hasRun){j.cb.apply(h||this.lastEvent.context,[this.lastEvent].concat(this.lastEvent.data))}}return this},remove:function(g,h){var i=this.findIndex(g,h);if(i!==null&&i!==-1){this.listeners[i].destroy();this.listeners.splice(i,1)}},count:function(){return this.listeners.length},find:function(g,h,m){var j,l=this.listeners.length,k;for(j=0;j<l;j=(j+1)){k=this.listeners[j];if(k.cb===g&&k.context===h){if(m){return j}else{return k}}}return m?-1:null},findIndex:function(g,h){return this.find(g,h,true)},execute:function(){if(this.active===false){return}var k,m=this.listeners.slice(),l,o=m.length,n,h=arguments[0]||this.context,g=arguments[2]||[],j=new d(this.name,g);j.target=arguments[1]||h;j.context=h;for(l=0;l<o;l=(l+1)){n=m[l];k=n.cb.apply(n.context||h,[j].concat(g));if(n.isOnce){this.listeners.splice(l,1)}if(k===false||j.isBubleCancelled()){break}}this.hasRun=true;this.lastEvent=j;return j},destroy:function(){this.listeners.length=0;this.name=null;this.listeners=null;this.context=null}};function b(g,h){if(h===null||h===undefined){h={}}this.handlers=[];this.context=g||this;this.memorise=typeof h.memorise==="boolean"?h.memorise:true}b.prototype={setContext:function(g){this.context=g},setEnabled:function(j,i){var g=this.getHandler(j);if(g===null){throw new Error("No handler with the name {name} could be found.".replace("{name}",j))}g.active=i();return this},isEnabled:function(i){var g=this.getHandler(i);if(g===null){return null}return g.active},getHandler:function(j){var g,h=this.handlers.length;for(g=0;g<h;g=(g+1)){if(this.handlers[g].name===j){return this.handlers[g]}}return null},setHandler:function(i,g){var h=new a(i,{memorise:this.memorise,active:true},g||this.context);this.handlers.push(h);return h},_trigger:function(j,k,h,g){var i=this.getHandler(j);if(!i){return}return i.execute(h||this.context,k,g)},trigger:function(h,g){return this._trigger(h,null,g,f.call(arguments,2))},triggerWithTarget:function(h,i,g){return this._trigger(h,i,g,f.call(arguments,3))},_on:function(l,g,k,h){var j=this.getHandler(l),i=h||this.context;if(typeof g!=="function"){throw new Error("Unable to register callback, typeof of cb is not a function.")}if(!j){j=this.setHandler(l,i)}j.add(g,k,h||this.context);return j},on:function(o,g,k,h){var p=o.split(" "),j,l=p.length,m=[];for(j=0;j<l;j=(j+1)){m.push(this._on(p[j],g,k,h||this.context))}return l===1?m[0]:m},_off:function(j,g,h){var i=this.getHandler(j);if(!i){return}i.remove(g,h||this.context)},off:function(m,g,h){var o=m.split(" "),j,k=o.length,l=[];for(j=0;j<k;j=(j+1)){l.push(this._off(o[j],g,h))}return this},destroy:function(){this.handlers.length=0;this.handlers=null;this.context=null}};e.ElimSignals=b;e.ElimSignals["util"]={createOn:function(g){var h;b.apply(g,[arguments[1]]);for(h in b.prototype){if(b.prototype.hasOwnProperty(h)){g[h]=b.prototype[h]}}}}})(this);